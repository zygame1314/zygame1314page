<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <title>å°é›…è¯¾ä»¶URLè§£å¯†æœºåˆ¶é€†å‘åˆ†æè¯¦è§£ - zygame1314</title>
</head>

<body>
    <main class="article-content">
        <div class="article-body">
            <h1>å°é›…è¯¾ä»¶URLè§£å¯†æœºåˆ¶é€†å‘åˆ†æè¯¦è§£</h1>

            <h2>ä¸€ã€é€†å‘åˆ†ææµç¨‹</h2>

            <h3>1. å®šä½è§£å¯†è°ƒç”¨</h3>
            <div class="analysis-box">
                <p>é€šè¿‡æµè§ˆå™¨å¼€å‘è€…å·¥å…·è§‚å¯Ÿåˆ°èµ„æºåŠ è½½è¿‡ç¨‹ä¸­çš„è°ƒç”¨å †æ ˆï¼š</p>
                <pre><code>
// è°ƒç”¨å †æ ˆè¿½è¸ª
(åŒ¿å) @ vendor-10-1m3jNn.js:138
N @ vendor-10-1m3jNn.js:138
(åŒ¿å) @ index-jPnMhD.js:118
enhancedFetch @ index-jPnMhD.js:118
xyApiGet @ index-jPnMhD.js:118
getDiskFileUrlBS @ index-jPnMhD.js:297
                </code></pre>
            </div>

            <h3>2. å®šä½æ ¸å¿ƒå‡½æ•°</h3>
            <div class="code-analysis">
                <p>æ‰¾åˆ°æ–‡ä»¶URLè·å–å‡½æ•°ï¼š</p>
                <pre><code>
// æ–‡ä»¶URLè·å–å‡½æ•°
const getDiskFileUrlBS = async ({quote_id: J, filename: ae, need_clear: se}) => {
    const oe = {
        encryption_status: 1
    };
    ae || (oe.filename = ae);
    const re = urlJoin(runtimeEnvParams.outerResourceUrl, "cloud/file_url", J)
    const ie = await xyApiGet(re, oe);
    // å…³é”®ï¼šè§£å¯†å¤„ç†
    return ie != null && ie.success && se === !0 && (ie.data.clear_url = decryptByDES(ie.data.url)),
    clearAudioTranscodeUrl(ie),
    ie
}
                </code></pre>
            </div>

            <h3>3. è§£å¯†å‡½æ•°åˆ†æ</h3>
            <div class="decrypt-analysis">
                <p>å‘ç°æ ¸å¿ƒè§£å¯†å‡½æ•°ï¼š</p>
                <pre><code class="secure-code">
// DESè§£å¯†å‡½æ•°
function decryptByDES(J) {
    try {
        // ä»é…ç½®è·å–keyå’Œvector
        const ae = CryptoJS$1.enc.Utf8.parse(activeBackendSetting.office365.key)
        const se = CryptoJS$1.enc.Utf8.parse(activeBackendSetting.office365.vector)
        // Base64 URLå®‰å…¨å­—ç¬¦è¿˜åŸ
        const oe = J.replace(/_/g, "+").replace(/\*/g, "/").replace(/-/g, "=");
        // DES-CBCè§£å¯†
        return CryptoJS$1.DES.decrypt({
            ciphertext: CryptoJS$1.enc.Base64.parse(oe)
        }, ae, {
            iv: se,
            mode: CryptoJS$1.mode.CBC,
            padding: CryptoJS$1.pad.Pkcs7
        }).toString(CryptoJS$1.enc.Utf8)
    } catch (ae) {
        console.error(ae)
    }
    return J
}
                </code></pre>
            </div>

            <h3>4. ç¯å¢ƒé…ç½®åˆ†æ</h3>
            <div class="config-analysis">
                <p>æœç´¢é…ç½®ä¿¡æ¯å‘ç°ä¸åŒç¯å¢ƒçš„å‚æ•°ï¼š</p>
                <pre><code class="secure-code">
// åç«¯é…ç½®ä¿¡æ¯
const backendSetting = {
    develop: {  // å¼€å‘ç¯å¢ƒ
        envTag: "dev",
        office365: {
            origin: "https://vip.ow365.cn",
            account: "29357",
            key: "59894985",    // å¼€å‘ç¯å¢ƒå¯†é’¥
            vector: "29393376"  // å¼€å‘ç¯å¢ƒå‘é‡
        }
    },
    production: {  // ç”Ÿäº§ç¯å¢ƒ
        envTag: "prd",
        office365: {
            origin: "https://vip.ow365.cn",
            account: "29353",
            key: "94374647",    // ç”Ÿäº§ç¯å¢ƒå¯†é’¥
            vector: "99526255"  // ç”Ÿäº§ç¯å¢ƒå‘é‡
        }
    }
}
                </code></pre>
            </div>

            <h2>äºŒã€è§£å¯†è¿‡ç¨‹è¯¦è§£</h2>
            <h3>1. å¯†é’¥å’Œå‘é‡</h3>
            <pre><code class="secure-code">
// ç”Ÿäº§ç¯å¢ƒçš„å…³é”®å‚æ•°
const key = "94374647";    // 8ä½å¯†é’¥
const vector = "99526255"; // 8ä½åˆå§‹åŒ–å‘é‡
            </code></pre>

            <div class="explanation-box">
                <h4>ğŸ’¡ ä¸ºä»€ä¹ˆæ˜¯8ä½ï¼Ÿ</h4>
                <p>DESç®—æ³•è¦æ±‚å¯†é’¥é•¿åº¦ä¸º64ä½ï¼ˆ8å­—èŠ‚ï¼‰ï¼Œæ¯ä¸ªå­—ç¬¦å ç”¨1å­—èŠ‚ï¼Œæ‰€ä»¥ä½¿ç”¨8ä½å­—ç¬¦ä¸²ã€‚</p>
            </div>

            <h3>2. Base64å­—ç¬¦è¿˜åŸ</h3>
            <pre><code>
const base64Str = encryptedUrl
    .replace(/_/g, '+')
    .replace(/\*/g, '/')
    .replace(/-/g, '=');
            </code></pre>

            <div class="explanation-box">
                <h4>ğŸ”„ å­—ç¬¦æ›¿æ¢è¯´æ˜ï¼š</h4>
                <ul>
                    <li>_ æ›¿æ¢å› + ï¼ˆURLå®‰å…¨å­—ç¬¦ï¼‰</li>
                    <li>* æ›¿æ¢å› / ï¼ˆURLå®‰å…¨å­—ç¬¦ï¼‰</li>
                    <li>- æ›¿æ¢å› = ï¼ˆå¡«å……å­—ç¬¦ï¼‰</li>
                </ul>
            </div>

            <h3>3. åˆ›å»ºè§£å¯†å™¨</h3>
            <pre><code>
const keyUtf8 = window.CryptoJS.enc.Utf8.parse(key);
const ivUtf8 = window.CryptoJS.enc.Utf8.parse(vector);
            </code></pre>

            <div class="explanation-box">
                <h4>ğŸ” è§£å¯†å™¨å‚æ•°ï¼š</h4>
                <p>å°†å­—ç¬¦ä¸²å½¢å¼çš„å¯†é’¥å’Œå‘é‡è½¬æ¢ä¸ºUTF-8ç¼–ç çš„å­—èŠ‚æ•°ç»„ï¼Œè¿™æ˜¯CryptoJSåº“è¦æ±‚çš„æ ¼å¼ã€‚</p>
            </div>

            <h3>4. æ‰§è¡Œè§£å¯†</h3>
            <pre><code>
const decrypted = window.CryptoJS.DES.decrypt({
    ciphertext: window.CryptoJS.enc.Base64.parse(base64Str)
}, keyUtf8, {
    iv: ivUtf8,
    mode: window.CryptoJS.mode.CBC,
    padding: window.CryptoJS.pad.Pkcs7
});
            </code></pre>

            <h2>ä¸‰ã€ç ´è§£è¦ç‚¹æç¤º</h2>
            <div class="usage-tips">
                <h3>ğŸ” å…³é”®ç‚¹åˆ†æï¼š</h3>
                <ul>
                    <li>è§£å¯†å‡½æ•°ä½äºindex-jPnMhD.jsä¸­ï¼Œæ··æ·†ä¸æ˜æ˜¾</li>
                    <li>å…³é”®è¯æœç´¢: DESã€decryptã€CryptoJSç­‰</li>
                    <li>é…ç½®ä¿¡æ¯ç¡¬ç¼–ç åœ¨äº†index-jPnMhD.jsä¸­</li>
                    <li>æ³¨æ„åŒºåˆ†å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒçš„å‚æ•°</li>
                </ul>

                <h3>ğŸ› ï¸ é€†å‘å·¥å…·å»ºè®®ï¼š</h3>
                <ul>
                    <li>Chrome/Edge DevTools - è°ƒè¯•å’Œè·Ÿè¸ªè°ƒç”¨æ ˆï¼ˆå¦‚æœé€†å‘ä¸å¤æ‚ï¼Œä¸€èˆ¬ä½¿ç”¨è¿™ä¸ªå°±è¶³å¤Ÿäº†ï¼‰</li>
                    <li>Fiddler/Charles - æŠ“åŒ…åˆ†æè¯·æ±‚</li>
                    <li>JavaScript Beautifier - åæ··æ·†ä»£ç </li>
                    <li>VSCode - æœç´¢å…³é”®å­—å’Œæ­£åˆ™åŒ¹é…</li>
                </ul>
            </div>

            <h2>å››ã€å¸¸è§é—®é¢˜è§£ç­”</h2>
            <div class="faq-section">
                <h3>Q1ï¼šå¦‚ä½•å®šä½è§£å¯†å‡½æ•°ï¼Ÿ</h3>
                <p>æŠ€å·§ï¼š</p>
                <ul>
                    <li>ä¸‹è½½èµ„æºæ—¶è®¾ç½®æ–­ç‚¹</li>
                    <li>æŸ¥çœ‹Networké¢æ¿ä¸­çš„JSæ–‡ä»¶</li>
                    <li>æœç´¢cryptoã€decryptç­‰å…³é”®è¯</li>
                    <li>åˆ†æåˆå§‹åŒ–é…ç½®ä¸­çš„å‚æ•°</li>
                </ul>

                <h3>Q2ï¼šæ‰¾ä¸åˆ°é…ç½®å‚æ•°æ€ä¹ˆåŠï¼Ÿ</h3>
                <p>å°è¯•ä»¥ä¸‹æ–¹æ³•ï¼š</p>
                <ul>
                    <li>æœç´¢office365ã€keyã€vectorç­‰å…³é”®è¯</li>
                    <li>åˆ†ælocalStorageå’ŒsessionStorage</li>
                    <li>æ£€æŸ¥åˆå§‹åŒ–è¯·æ±‚çš„å“åº”æ•°æ®</li>
                </ul>

                <h3>Q3ï¼šURLæ ¼å¼å¼‚å¸¸å¦‚ä½•å¤„ç†ï¼Ÿ</h3>
                <p>åˆ†æä»¥ä¸‹å‡ ç‚¹ï¼š</p>
                <ul>
                    <li>æ˜¯å¦ä½¿ç”¨äº†URLå®‰å…¨çš„Base64ç¼–ç </li>
                    <li>æ£€æŸ¥ç‰¹æ®Šå­—ç¬¦çš„æ›¿æ¢è§„åˆ™(_,*,-)</li>
                    <li>éªŒè¯Base64è§£ç åçš„æ•°æ®é•¿åº¦</li>
                    <li>ç¡®è®¤å¡«å……å­—ç¬¦(=)çš„å¤„ç†æ–¹å¼</li>
                </ul>
            </div>

            <h2>äº”ã€ç¯å¢ƒå·®å¼‚è¯´æ˜</h2>
            <div class="env-diff">
                <h3>ä¸åŒç¯å¢ƒçš„é…ç½®å·®å¼‚ï¼š</h3>
                <table class="secure-table">
                    <tr>
                        <th>ç¯å¢ƒ</th>
                        <th>å¯†é’¥</th>
                        <th>å‘é‡</th>
                        <th>è´¦å·</th>
                    </tr>
                    <tr>
                        <td>å¼€å‘ç¯å¢ƒ</td>
                        <td>59894985</td>
                        <td>29393376</td>
                        <td>29357</td>
                    </tr>
                    <tr>
                        <td>ç”Ÿäº§ç¯å¢ƒ</td>
                        <td>94374647</td>
                        <td>99526255</td>
                        <td>29353</td>
                    </tr>
                </table>
            </div>

            <div class="article-footer">
                <p>ç‰¹åˆ«è¯´æ˜ï¼šæœ¬æ–‡ä»…ç”¨äºå­¦ä¹ äº¤æµï¼Œè¯·å‹¿æ»¥ç”¨æˆ–ä¼ æ’­è§£å¯†åçš„URLã€‚ä¸åŒç¯å¢ƒçš„å‚æ•°ä»…ä¾›å‚è€ƒï¼Œå®é™…ä½¿ç”¨æ—¶è¯·ä»¥å½“å‰ç¯å¢ƒé…ç½®ä¸ºå‡†ã€‚</p>
            </div>
        </div>
    </main>
</body>

</html>